// Gravity Forms DPS PxPay
// https://shop.webaware.com.au/downloads/gravity-forms-dps-pxpay/

"use strict";!function(s){var p=!1,e=[],d=0;function r(){var p=gfdpspxpay_updatev1[d];"end"===p?(s("#gfdpspxpay-upgrade").replaceWith("<strong>Done.</strong>"),s("#gfdpspxpay-updatev1-progress").hide()):(s("#gfdpspxpay-upgrade").text("Processing "+p+"..."),s("#gfdpspxpay-updatev1-progress").show(),s.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:p+"_list"},t))}function t(p){p&&p.success&&(e=p.data.ids,g(0,p.data.step))}function g(p,t){p<e.length&&s.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:t,id:e[p],next:p+1},a)}function a(p){var t,a;p&&p.success?((t=p.data.next)<e.length?(a=Math.floor(t/e.length*100)+"%",g(t,p.data.step)):(a="100%",d++,r()),s("#gfdpspxpay-updatev1-progress > div").css({width:a}).text(a)):(p=p.data.error||"ERROR",s("#gfdpspxpay-updatev1-progress > div").css({width:"100%",backgroundColor:"transparent"}).text(p))}s("#gfdpspxpay-upgrade").on("click",function(){p||(p=!0,r())})}(jQuery);