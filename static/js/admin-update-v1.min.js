(e=>{let p=!1,s=[],d=0;function r(){var p=gfdpspxpay_updatev1[d];"end"===p?(e("#gfdpspxpay-upgrade").replaceWith("<strong>Done.</strong>"),e("#gfdpspxpay-updatev1-progress").hide()):(e("#gfdpspxpay-upgrade").text("Processing "+p+"..."),e("#gfdpspxpay-updatev1-progress").show(),e.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:p+"_list"},t))}function t(p){p&&p.success&&(s=p.data.ids,g(0,p.data.step))}function g(p,t){p<s.length&&e.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:t,id:s[p],next:p+1},a)}function a(t){if(t&&t.success){var a=t.data.next;let p;a<s.length?(p=Math.floor(a/s.length*100)+"%",g(a,t.data.step)):(p="100%",d++,r()),e("#gfdpspxpay-updatev1-progress > div").css({width:p}).text(p)}else{a=t.data.error||"ERROR";e("#gfdpspxpay-updatev1-progress > div").css({width:"100%",backgroundColor:"transparent"}).text(a)}}e("#gfdpspxpay-upgrade").on("click",function(){p||(p=!0,r())})})(jQuery);