// Gravity Forms DPS PxPay
// https://shop.webaware.com.au/downloads/gravity-forms-dps-pxpay/

"use strict";!function(p){var t=!1,a=[],s=0;function e(){var t=gfdpspxpay_updatev1[s];"end"===t?(p("#gfdpspxpay-upgrade").replaceWith("<strong>Done.</strong>"),p("#gfdpspxpay-updatev1-progress").hide()):(p("#gfdpspxpay-upgrade").text("Processing "+t+"..."),p("#gfdpspxpay-updatev1-progress").show(),p.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:t+"_list"},d))}function d(p){p&&p.success&&(a=p.data.ids,r(0,p.data.step))}function r(t,s){t<a.length&&p.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:s,id:a[t],next:t+1},g)}function g(t){if(t&&t.success){var d,g=t.data.next;g<a.length?(d=Math.floor(g/a.length*100)+"%",r(g,t.data.step)):(d="100%",s++,e()),p("#gfdpspxpay-updatev1-progress > div").css({width:d}).text(d)}else{var n=t.data.error||"ERROR";p("#gfdpspxpay-updatev1-progress > div").css({width:"100%",backgroundColor:"transparent"}).text(n)}}p("#gfdpspxpay-upgrade").on("click",function(){t||(t=!0,e())})}(jQuery);